<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-other" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.3.2">
<title data-rh="true">Other APIs | React Native Testing Library</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://callstack.github.io/react-native-testing-library/img/owl.png"><meta data-rh="true" name="twitter:image" content="https://callstack.github.io/react-native-testing-library/img/owl.png"><meta data-rh="true" property="og:url" content="https://callstack.github.io/react-native-testing-library/docs/other"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Other APIs | React Native Testing Library"><meta data-rh="true" name="description" content="Async utilities"><meta data-rh="true" property="og:description" content="Async utilities"><link data-rh="true" rel="icon" href="/react-native-testing-library/img/owl.png"><link data-rh="true" rel="canonical" href="https://callstack.github.io/react-native-testing-library/docs/other"><link data-rh="true" rel="alternate" href="https://callstack.github.io/react-native-testing-library/docs/other" hreflang="en"><link data-rh="true" rel="alternate" href="https://callstack.github.io/react-native-testing-library/docs/other" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://6CJ0BV6AVN-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="React Native Testing Library" href="/react-native-testing-library/opensearch.xml"><link rel="stylesheet" href="/react-native-testing-library/assets/css/styles.b7c34a9c.css">
<script src="/react-native-testing-library/assets/js/runtime~main.ea62648f.js" defer="defer"></script>
<script src="/react-native-testing-library/assets/js/main.86f7bea3.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/react-native-testing-library/"><div class="navbar__logo"><img src="/react-native-testing-library/img/owl.png" alt="React Native Testing Library" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/react-native-testing-library/img/owl.png" alt="React Native Testing Library" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">React Native Testing Library</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/react-native-testing-library/docs/getting-started">Docs</a><a href="https://github.com/callstack/react-native-testing-library" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Introduction</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-native-testing-library/docs/getting-started">Getting Started</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">API Reference</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-native-testing-library/docs/api">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-native-testing-library/docs/render">Render function</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-native-testing-library/docs/screen">Screen object</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-native-testing-library/docs/queries">Queries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-native-testing-library/docs/jest-matchers">Jest Matchers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-native-testing-library/docs/user-event">User Event</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-native-testing-library/docs/fire-event">Fire Event</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-native-testing-library/docs/render-hook">Render Hook API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/react-native-testing-library/docs/other">Other APIs</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-native-testing-library/docs/how-should-i-query">How Should I Query?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-native-testing-library/docs/troubleshooting">Troubleshooting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-native-testing-library/docs/faq">FAQ</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Advanced</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-native-testing-library/docs/testing-env">Testing Environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-native-testing-library/docs/understanding-act">Understanding Act function</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Community</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-native-testing-library/docs/community-resources">Community Resources</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Migrations</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-native-testing-library/docs/migration-jest-native">Migration from Jest Native matchers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-native-testing-library/docs/migration-v12">Migration to 12.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-native-testing-library/docs/migration-v11">Migration to 11.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-native-testing-library/docs/migration-v9">Migration to 9.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-native-testing-library/docs/migration-v7">Migration to 7.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-native-testing-library/docs/migration-v2">Migration to 2.0</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/react-native-testing-library/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">API Reference</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Other APIs</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Other APIs</h1></header><h2 id="async-utilities">Async utilities</h2>
<h3 id="findby-queries"><code>findBy*</code> queries</h3>
<p>The <code>findBy*</code> queries are used to find elements that are not instantly available but will be added as a result of some asynchronous action. Learn more details <a href="queries#find-by">here</a>.</p>
<h3 id="waitfor"><code>waitFor</code></h3>
<pre><code class="language-tsx">function waitFor&lt;T&gt;(
  expectation: () =&gt; T,
  { timeout: number = 1000, interval: number = 50 },
): Promise&lt;T&gt; {}
</code></pre>
<p>Waits for a period of time for the <code>expectation</code> callback to pass. <code>waitFor</code> may run the callback a number of times until timeout is reached, as specified by the <code>timeout</code> and <code>interval</code> options. The callback must throw an error when the expectation is not met. Returning any value, including a falsy one, will be treated as meeting the expectation, and the callback result will be returned to the caller of <code>waitFor</code> function.</p>
<pre><code class="language-tsx">await waitFor(() =&gt; expect(mockFunction).toHaveBeenCalledWith());
</code></pre>
<p><code>waitFor</code> function will be executing <code>expectation</code> callback every <code>interval</code> (default: every 50 ms) until <code>timeout</code> (default: 1000 ms) is reached. The repeated execution of callback is stopped as soon as it does not throw an error, in such case the value returned by the callback is returned to <code>waitFor</code> caller. Otherwise, when it reaches the timeout, the final error thrown by <code>expectation</code> will be re-thrown by <code>waitFor</code> to the calling code.</p>
<pre><code class="language-tsx">// ❌ `waitFor` will return immediately because callback does not throw
await waitFor(() =&gt; false);
</code></pre>
<p><code>waitFor</code> is an async function so you need to <code>await</code> the result to pause test execution.</p>
<pre><code class="language-jsx">// ❌ missing `await`: `waitFor` will just return Promise that will be rejected when the timeout is reached
waitFor(() =&gt; expect(1).toBe(2));
</code></pre>
<admonition type="note"><p>You can enforce awaiting <code>waitFor</code> by using the <a href="https://github.com/testing-library/eslint-plugin-testing-library/blob/main/docs/rules/await-async-utils.md">await-async-utils</a> rule from <a href="https://github.com/testing-library/eslint-plugin-testing-library">eslint-plugin-testing-library</a>.</p></admonition>
<p>Since <code>waitFor</code> is likely to run <code>expectation</code> callback multiple times, it is highly recommended for it <a href="https://kentcdodds.com/blog/common-mistakes-with-react-testing-library#performing-side-effects-in-waitfor">not to perform any side effects</a> in <code>waitFor</code>.</p>
<pre><code class="language-jsx">await waitFor(() =&gt; {
  // ❌ button will be pressed on each waitFor iteration
  fireEvent.press(screen.getByText(&#x27;press me&#x27;));
  expect(mockOnPress).toHaveBeenCalled();
});
</code></pre>
<admonition type="note"><p>Avoiding side effects in <code>expectation</code> callback can be partially enforced with the <a href="https://github.com/testing-library/eslint-plugin-testing-library/blob/main/docs/rules/no-wait-for-side-effects.md"><code>no-wait-for-side-effects</code> rule</a>.</p></admonition>
<p>It is also recommended to have a <a href="https://kentcdodds.com/blog/common-mistakes-with-react-testing-library#having-multiple-assertions-in-a-single-waitfor-callback">single assertion per each <code>waitFor</code></a> for more consistency and faster failing tests. If you want to make several assertions, then they should be in seperate <code>waitFor</code> calls. In many cases you won&#x27;t actually need to wrap the second assertion in <code>waitFor</code> since the first one will do the waiting required for asynchronous change to happen.</p>
<h4 id="using-a-react-native-version--071-with-jest-fake-timers">Using a React Native version &lt; 0.71 with Jest fake timers</h4>
<admonition type="caution"><p>When using a version of React Native &lt; 0.71 and modern fake timers (the default for <code>Jest</code> &gt;= 27), <code>waitFor</code> won&#x27;t work (it will always timeout even if <code>expectation()</code> doesn&#x27;t throw) unless you use the custom <a href="https://github.com/callstack/react-native-testing-library#custom-jest-preset">@testing-library/react-native preset</a>.</p></admonition>
<p><code>waitFor</code> checks whether Jest fake timers are enabled and adapts its behavior in such case. The following snippet is a simplified version of how it behaves when fake timers are enabled:</p>
<pre><code class="language-tsx">let fakeTimeRemaining = timeout;
let lastError;

while (fakeTimeRemaining &gt; 0) {
  fakeTimeRemaining = fakeTimeRemaining - interval;
  jest.advanceTimersByTime(interval);
  try {
    // resolve
    return expectation();
  } catch (error) {
    lastError = error;
  }
}

// reject
throw lastError;
</code></pre>
<p>In the following example we test that a function is called after 10 seconds using fake timers. Since we&#x27;re using fake timers, the test won&#x27;t depend on real time passing and thus be much faster and more reliable. Also we don&#x27;t have to advance fake timers through Jest fake timers API because <code>waitFor</code> already does this for us.</p>
<pre><code class="language-tsx">// in component
setTimeout(() =&gt; {
  someFunction();
}, 10000);

// in test
jest.useFakeTimers();

await waitFor(() =&gt; {
  expect(someFunction).toHaveBeenCalledWith();
}, 10000);
</code></pre>
<admonition type="info"><p>In order to properly use <code>waitFor</code> you need at least React &gt;=16.9.0 (featuring async <code>act</code>) or React Native &gt;=0.61 (which comes with React &gt;=16.9.0).</p></admonition>
<admonition type="note"><p>If you receive warnings related to <code>act()</code> function consult our <a href="/react-native-testing-library/docs/understanding-act">Undestanding Act</a> function document.</p></admonition>
<h3 id="waitforelementtoberemoved"><code>waitForElementToBeRemoved</code></h3>
<pre><code class="language-ts">function waitForElementToBeRemoved&lt;T&gt;(
  expectation: () =&gt; T,
  { timeout: number = 4500, interval: number = 50 },
): Promise&lt;T&gt; {}
</code></pre>
<p>Waits for non-deterministic periods of time until queried element is removed or times out. <code>waitForElementToBeRemoved</code> periodically calls <code>expectation</code> every <code>interval</code> milliseconds to determine whether the element has been removed or not.</p>
<pre><code class="language-jsx">import { render, screen, waitForElementToBeRemoved } from &#x27;@testing-library/react-native&#x27;;

test(&#x27;waiting for an Banana to be removed&#x27;, async () =&gt; {
  render(&lt;Banana /&gt;);

  await waitForElementToBeRemoved(() =&gt; screen.getByText(&#x27;Banana ready&#x27;));
});
</code></pre>
<p>This method expects that the element is initially present in the render tree and then is removed from it. If the element is not present when you call this method it throws an error.</p>
<p>You can use any of <code>getBy</code>, <code>getAllBy</code>, <code>queryBy</code> and <code>queryAllBy</code> queries for <code>expectation</code> parameter.</p>
<admonition type="info"><p>In order to properly use <code>waitForElementToBeRemoved</code> you need at least React &gt;=16.9.0 (featuring async <code>act</code>) or React Native &gt;=0.61 (which comes with React &gt;=16.9.0).</p></admonition>
<admonition type="note"><p>If you receive warnings related to <code>act()</code> function consult our <a href="/react-native-testing-library/docs/understanding-act">Undestanding Act</a> function document.</p></admonition>
<h2 id="configuration">Configuration</h2>
<h3 id="configure"><code>configure</code></h3>
<pre><code class="language-ts">type Config = {
  asyncUtilTimeout: number;
  defaultHidden: boolean;
  defaultDebugOptions: Partial&lt;DebugOptions&gt;;
};

function configure(options: Partial&lt;Config&gt;) {}
</code></pre>
<h4 id="asyncutiltimeout-option"><code>asyncUtilTimeout</code> option</h4>
<p>Default timeout, in ms, for async helper functions (<code>waitFor</code>, <code>waitForElementToBeRemoved</code>) and <code>findBy*</code> queries. Defaults to 1000 ms.</p>
<h4 id="defaultincludehiddenelements-option"><code>defaultIncludeHiddenElements</code> option</h4>
<p>Default value for <a href="/react-native-testing-library/docs/queries#includehiddenelements-option">includeHiddenElements</a> query option for all queries. The default value is set to <code>false</code>, so all queries will not match <a href="#ishiddenfromaccessibility">elements hidden from accessibility</a>. This is because the users of the app would not be able to see such elements.</p>
<p>This option is also available as <code>defaultHidden</code> alias for compatibility with <a href="https://testing-library.com/docs/dom-testing-library/api-configuration/#defaulthidden">React Testing Library</a>.</p>
<h4 id="defaultdebugoptions-option"><code>defaultDebugOptions</code> option</h4>
<p>Default <a href="#debug">debug options</a> to be used when calling <code>debug()</code>. These default options will be overridden by the ones you specify directly when calling <code>debug()</code>.</p>
<h3 id="resettodefaults"><code>resetToDefaults()</code></h3>
<pre><code class="language-ts">function resetToDefaults() {}
</code></pre>
<h3 id="environment-variables">Environment variables</h3>
<h4 id="rntl_skip_auto_cleanup"><code>RNTL_SKIP_AUTO_CLEANUP</code></h4>
<p>Set to <code>true</code> to disable automatic <code>cleanup()</code> after each test. It works the same as importing <code>react-native-testing-library/dont-cleanup-after-each</code> or using <code>react-native-testing-library/pure</code>.</p>
<pre><code class="language-shell">$ RNTL_SKIP_AUTO_CLEANUP=true jest
</code></pre>
<h4 id="rntl_skip_auto_detect_fake_timers"><code>RNTL_SKIP_AUTO_DETECT_FAKE_TIMERS</code></h4>
<p>Set to <code>true</code> to disable auto-detection of fake timers. This might be useful in rare cases when you want to use non-Jest fake timers. See <a href="https://github.com/callstack/react-native-testing-library/issues/886">issue #886</a> for more details.</p>
<pre><code class="language-shell">$ RNTL_SKIP_AUTO_DETECT_FAKE_TIMERS=true jest
</code></pre>
<h2 id="accessibility">Accessibility</h2>
<h3 id="ishiddenfromaccessibility"><code>isHiddenFromAccessibility</code></h3>
<pre><code class="language-ts">function isHiddenFromAccessibility(element: ReactTestInstance | null): boolean {}
</code></pre>
<p>Also available as <code>isInaccessible()</code> alias for React Testing Library compatibility.</p>
<p>Checks if given element is hidden from assistive technology, e.g. screen readers.</p>
<admonition type="note"><p>Like <a href="https://testing-library.com/docs/dom-testing-library/api-accessibility/#isinaccessible"><code>isInaccessible</code></a> function from DOM Testing Library this function considers both accessibility elements and presentational elements (regular <code>View</code>s) to be accessible, unless they are hidden in terms of host platform.</p><p>This covers only part of <a href="https://www.w3.org/TR/wai-aria-1.2/#tree_exclusion">ARIA notion of Accessiblity Tree</a>, as ARIA excludes both hidden and presentational elements from the Accessibility Tree.</p></admonition>
<p>For the scope of this function, element is inaccessible when it, or any of its ancestors, meets any of the following conditions:</p>
<ul>
<li>it has <code>display: none</code> style</li>
<li>it has <a href="https://reactnative.dev/docs/accessibility#aria-hidden"><code>aria-hidden</code></a> prop set to <code>true</code></li>
<li>it has <a href="https://reactnative.dev/docs/accessibility#accessibilityelementshidden-ios"><code>accessibilityElementsHidden</code></a> prop set to <code>true</code></li>
<li>it has <a href="https://reactnative.dev/docs/accessibility#importantforaccessibility-android"><code>importantForAccessibility</code></a> prop set to <code>no-hide-descendants</code></li>
<li>it has sibling host element with either <a href="https://reactnative.dev/docs/accessibility#aria-modal-ios"><code>aria-modal</code></a> or <a href="https://reactnative.dev/docs/accessibility#accessibilityviewismodal-ios"><code>accessibilityViewIsModal</code></a> prop set to <code>true</code></li>
</ul>
<p>Specifying <code>accessible={false}</code>, <code>accessiblityRole=&quot;none&quot;</code>, or <code>importantForAccessibility=&quot;no&quot;</code> props does not cause the element to become inaccessible.</p>
<h2 id="other-helpers">Other helpers</h2>
<h3 id="within"><code>within</code>, <code>getQueriesForElement</code></h3>
<pre><code class="language-jsx">function within(element: ReactTestInstance): Queries {}

function getQueriesForElement(element: ReactTestInstance): Queries {}
</code></pre>
<p><code>within</code> (also available as <code>getQueriesForElement</code> alias) performs <a href="/react-native-testing-library/docs/queries">queries</a> scoped to given element.</p>
<admonition type="note"><p>Please note that additional <code>render</code> specific operations like <code>update</code>, <code>unmount</code>, <code>debug</code>, <code>toJSON</code> are <em>not</em> included.</p></admonition>
<pre><code class="language-jsx">const detailsScreen = within(screen.getByA11yHint(&#x27;Details Screen&#x27;));
expect(detailsScreen.getByText(&#x27;Some Text&#x27;)).toBeOnTheScreen();
expect(detailsScreen.getByDisplayValue(&#x27;Some Value&#x27;)).toBeOnTheScreen();
expect(detailsScreen.queryByLabelText(&#x27;Some Label&#x27;)).toBeOnTheScreen();
await expect(detailsScreen.findByA11yHint(&#x27;Some Label&#x27;)).resolves.toBeOnTheScreen();
</code></pre>
<p>Use cases for scoped queries include:</p>
<ul>
<li>queries scoped to a single item inside a FlatList containing many items</li>
<li>queries scoped to a single screen in tests involving screen transitions (e.g. with react-navigation)</li>
</ul>
<h3 id="act"><code>act</code></h3>
<p>Useful function to help testing components that use hooks API. By default any <code>render</code>, <code>update</code>, <code>fireEvent</code>, and <code>waitFor</code> calls are wrapped by this function, so there is no need to wrap it manually. This method is re-exported from <a href="https://github.com/facebook/react/blob/main/packages/react-test-renderer/src/ReactTestRenderer.js#L567%5D"><code>react-test-renderer</code></a>.</p>
<p>Consult our <a href="/react-native-testing-library/docs/understanding-act">Undestanding Act function</a> document for more understanding of its intricacies.</p>
<h3 id="cleanup"><code>cleanup</code></h3>
<pre><code class="language-ts">const cleanup: () =&gt; void;
</code></pre>
<p>Unmounts React trees that were mounted with <code>render</code> and clears <code>screen</code> variable that holds latest <code>render</code> output.</p>
<admonition type="info"><p>Please note that this is done automatically if the testing framework you&#x27;re using supports the <code>afterEach</code> global (like mocha, Jest, and Jasmine). If not, you will need to do manual cleanups after each test.</p></admonition>
<p>For example, if you&#x27;re using the <code>jest</code> testing framework, then you would need to use the <code>afterEach</code> hook like so:</p>
<pre><code class="language-jsx">import { cleanup, render } from &#x27;@testing-library/react-native/pure&#x27;;
import { View } from &#x27;react-native&#x27;;

afterEach(cleanup);

it(&#x27;renders a view&#x27;, () =&gt; {
  render(&lt;View /&gt;);
  // ...
});
</code></pre>
<p>The <code>afterEach(cleanup)</code> call also works in <code>describe</code> blocks:</p>
<pre><code class="language-jsx">describe(&#x27;when logged in&#x27;, () =&gt; {
  afterEach(cleanup);

  it(&#x27;renders the user&#x27;, () =&gt; {
    render(&lt;SiteHeader /&gt;);
    // ...
  });
});
</code></pre>
<p>Failing to call <code>cleanup</code> when you&#x27;ve called <code>render</code> could result in a memory leak and tests which are not &quot;idempotent&quot; (which can lead to difficult to debug errors in your tests).</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/callstack/react-native-testing-library/blob/main/website/docs/OtherAPIs.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/react-native-testing-library/docs/render-hook"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Render Hook API</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/react-native-testing-library/docs/how-should-i-query"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">How Should I Query?</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#async-utilities" class="table-of-contents__link toc-highlight">Async utilities</a><ul><li><a href="#findby-queries" class="table-of-contents__link toc-highlight"><code>findBy*</code> queries</a></li><li><a href="#waitfor" class="table-of-contents__link toc-highlight"><code>waitFor</code></a></li><li><a href="#waitforelementtoberemoved" class="table-of-contents__link toc-highlight"><code>waitForElementToBeRemoved</code></a></li></ul></li><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a><ul><li><a href="#configure" class="table-of-contents__link toc-highlight"><code>configure</code></a></li><li><a href="#resettodefaults" class="table-of-contents__link toc-highlight"><code>resetToDefaults()</code></a></li><li><a href="#environment-variables" class="table-of-contents__link toc-highlight">Environment variables</a></li></ul></li><li><a href="#accessibility" class="table-of-contents__link toc-highlight">Accessibility</a><ul><li><a href="#ishiddenfromaccessibility" class="table-of-contents__link toc-highlight"><code>isHiddenFromAccessibility</code></a></li></ul></li><li><a href="#other-helpers" class="table-of-contents__link toc-highlight">Other helpers</a><ul><li><a href="#within" class="table-of-contents__link toc-highlight"><code>within</code>, <code>getQueriesForElement</code></a></li><li><a href="#act" class="table-of-contents__link toc-highlight"><code>act</code></a></li><li><a href="#cleanup" class="table-of-contents__link toc-highlight"><code>cleanup</code></a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/react-native-testing-library/docs/getting-started">Getting started</a></li><li class="footer__item"><a class="footer__link-item" href="/react-native-testing-library/docs/api">API</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="http://stackoverflow.com/questions/tagged/react-native-testing-library" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/QbGezWe" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord Channel<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/callstack/react-native-testing-library" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/callstack/react-native-testing-library" target="_blank" rel="noopener noreferrer" class="footer__link-item">Star<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Callstack Open Source</div></div></div></footer></div>
</body>
</html>