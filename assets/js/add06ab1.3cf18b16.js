"use strict";(self.webpackChunkreact_native_testing_library_website=self.webpackChunkreact_native_testing_library_website||[]).push([[725],{818:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>s,metadata:()=>o,toc:()=>d});var i=n(5893),a=n(1151),r=n(3901);const s={id:"migration-v11",title:"Migration to 11.0"},l="Breaking changes",o={id:"migration-v11",title:"Migration to 11.0",description:"Migration to React Native Testing Library version 11 from version 9.x or 10.x should be a relatively easy task due small amount of breaking changes.",source:"@site/docs/MigrationV11.md",sourceDirName:".",slug:"/migration-v11",permalink:"/react-native-testing-library/docs/migration-v11",draft:!1,unlisted:!1,editUrl:"https://github.com/callstack/react-native-testing-library/blob/main/website/docs/MigrationV11.md",tags:[],version:"current",frontMatter:{id:"migration-v11",title:"Migration to 11.0"},sidebar:"docs",previous:{title:"Migration to 12.0",permalink:"/react-native-testing-library/docs/migration-v12"},next:{title:"Migration to 9.0",permalink:"/react-native-testing-library/docs/migration-v9"}},c={},d=[{value:"Update to Jest 28 if you use fake timers",id:"update-to-jest-28-if-you-use-fake-timers",level:3},{value:"Refactor legacy <code>waitForOptions</code> position",id:"refactor-legacy-waitforoptions-position",level:3},{value:"Triggering non-touch events on targets with <code>pointerEvents=&quot;box-none&quot;</code> prop",id:"triggering-non-touch-events-on-targets-with-pointereventsbox-none-prop",level:3},{value:"All changes",id:"all-changes",level:2},{value:"Full Changelog",id:"full-changelog",level:2}];function h(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"Migration to React Native Testing Library version 11 from version 9.x or 10.x should be a relatively easy task due small amount of breaking changes."}),"\n",(0,i.jsx)(r.Z,{toc:d}),"\n",(0,i.jsx)(t.h1,{id:"breaking-changes",children:"Breaking changes"}),"\n",(0,i.jsx)(t.h3,{id:"update-to-jest-28-if-you-use-fake-timers",children:"Update to Jest 28 if you use fake timers"}),"\n",(0,i.jsxs)(t.p,{children:["If you use fake timers in any of your tests you should update your Jest dependencies to version 28. This is due to the fact that ",(0,i.jsxs)(t.a,{href:"https://jestjs.io/docs/jest-object#jestusefaketimersfaketimersconfig",children:[(0,i.jsx)(t.code,{children:"jest.useFakeTimers()"})," config structure"]})," has changed."]}),"\n",(0,i.jsxs)(t.h3,{id:"refactor-legacy-waitforoptions-position",children:["Refactor legacy ",(0,i.jsx)(t.code,{children:"waitForOptions"})," position"]}),"\n",(0,i.jsxs)(t.p,{children:["In version 9 we introducted query ",(0,i.jsx)(t.code,{children:"options"})," parameters for each query type. This affected all ",(0,i.jsx)(t.code,{children:"findBy"})," and ",(0,i.jsx)(t.code,{children:"findAllBy"})," queries because their signatures changed e.g. from:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",children:"function findByText(text: TextMatch, waitForOptions?: WaitForOptions);\nfunction findAllByText(text: TextMatch, waitForOptions?: WaitForOptions);\n"})}),"\n",(0,i.jsx)(t.p,{children:"to"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",children:"function findByText(text: TextMatch, options?: TextMatchOptions, waitForOptions?: WaitForOptions)\nfunction findAllByText(text: TextMatch, options?: TextMatchOptions, waitForOptions?: WaitForOptions)\n"})}),"\n",(0,i.jsxs)(t.p,{children:["In order to facilitate transition, in version 9 and 10, we provided a temporary possibility to pass ",(0,i.jsx)(t.code,{children:"WaitForOptions"})," like ",(0,i.jsx)(t.code,{children:"timeout"}),", ",(0,i.jsx)(t.code,{children:"interval"}),", etc inside ",(0,i.jsx)(t.code,{children:"options"})," argument. From this release we require passing these as the proper third parameter."]}),"\n",(0,i.jsx)(t.p,{children:"This change is easy to implement:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",children:"findByText(/Text/, { timeout: 1000 });\n"})}),"\n",(0,i.jsx)(t.p,{children:"should become"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",children:"findByText(/Text/, {}, { timeout: 1000 });\n"})}),"\n",(0,i.jsxs)(t.h3,{id:"triggering-non-touch-events-on-targets-with-pointereventsbox-none-prop",children:["Triggering non-touch events on targets with ",(0,i.jsx)(t.code,{children:'pointerEvents="box-none"'})," prop"]}),"\n",(0,i.jsxs)(t.p,{children:["Up to version 10, RNTL disables all events for a target with ",(0,i.jsx)(t.code,{children:'pointerEvents="box-none"'}),". This behavior is counter to how React Native itself functions."]}),"\n",(0,i.jsxs)(t.p,{children:["From version 11, RNTL continues to disable ",(0,i.jsx)(t.code,{children:"press"})," event for these targets but allows triggering other events, e.g. ",(0,i.jsx)(t.code,{children:"layout"}),"."]}),"\n",(0,i.jsx)(t.h2,{id:"all-changes",children:"All changes"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["chore(breaking): update Jest to 28 by @mdjastrzebski in ",(0,i.jsx)(t.a,{href:"https://github.com/callstack/react-native-testing-library/pull/1008",children:"https://github.com/callstack/react-native-testing-library/pull/1008"})]}),"\n",(0,i.jsxs)(t.li,{children:["refactor(breaking): remove legacy wait for options support by @mdjastrzebski in ",(0,i.jsx)(t.a,{href:"https://github.com/callstack/react-native-testing-library/pull/1018",children:"https://github.com/callstack/react-native-testing-library/pull/1018"})]}),"\n",(0,i.jsxs)(t.li,{children:["refactor(breaking): remove ",(0,i.jsx)(t.code,{children:"byA11yStates"})," queries by @mdjastrzebski in ",(0,i.jsx)(t.a,{href:"https://github.com/callstack/react-native-testing-library/pull/1015",children:"https://github.com/callstack/react-native-testing-library/pull/1015"})]}),"\n",(0,i.jsxs)(t.li,{children:["chore: update react-native to 0.69.1 by @mdjastrzebski in ",(0,i.jsx)(t.a,{href:"https://github.com/callstack/react-native-testing-library/pull/1010",children:"https://github.com/callstack/react-native-testing-library/pull/1010"})]}),"\n",(0,i.jsxs)(t.li,{children:["chore: update deps @types for react/react-native by @mdjastrzebski in ",(0,i.jsx)(t.a,{href:"https://github.com/callstack/react-native-testing-library/pull/1013",children:"https://github.com/callstack/react-native-testing-library/pull/1013"})]}),"\n",(0,i.jsxs)(t.li,{children:["feat: Trigger non-touch events on box-none targets by @dcalhoun in ",(0,i.jsx)(t.a,{href:"https://github.com/callstack/react-native-testing-library/pull/906",children:"https://github.com/callstack/react-native-testing-library/pull/906"})]}),"\n",(0,i.jsxs)(t.li,{children:["docs: create document describing act function and related errors by @mdjastrzebski in ",(0,i.jsx)(t.a,{href:"https://github.com/callstack/react-native-testing-library/pull/969",children:"https://github.com/callstack/react-native-testing-library/pull/969"})]}),"\n",(0,i.jsxs)(t.li,{children:["chore: Organise a11y queries by predicate by @MattAgn in ",(0,i.jsx)(t.a,{href:"https://github.com/callstack/react-native-testing-library/pull/977",children:"https://github.com/callstack/react-native-testing-library/pull/977"})]}),"\n",(0,i.jsxs)(t.li,{children:["chore: reenable skipped byText tests by @mdjastrzebski in ",(0,i.jsx)(t.a,{href:"https://github.com/callstack/react-native-testing-library/pull/1017",children:"https://github.com/callstack/react-native-testing-library/pull/1017"})]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"full-changelog",children:"Full Changelog"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.a,{href:"https://github.com/callstack/react-native-testing-library/compare/v10.1.1...v11.0.0",children:"https://github.com/callstack/react-native-testing-library/compare/v10.1.1...v11.0.0"})})]})}function u(e={}){const{wrapper:t}={...(0,a.a)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},3901:(e,t,n)=>{n.d(t,{Z:()=>s});n(7294);var i=n(3743);const a={tableOfContentsInline:"tableOfContentsInline_prmo"};var r=n(5893);function s(e){let{toc:t,minHeadingLevel:n,maxHeadingLevel:s}=e;return(0,r.jsx)("div",{className:a.tableOfContentsInline,children:(0,r.jsx)(i.Z,{toc:t,minHeadingLevel:n,maxHeadingLevel:s,className:"table-of-contents",linkClassName:null})})}},3743:(e,t,n)=>{n.d(t,{Z:()=>m});var i=n(7294),a=n(6668);function r(e){const t=e.map((e=>({...e,parentIndex:-1,children:[]}))),n=Array(7).fill(-1);t.forEach(((e,t)=>{const i=n.slice(2,e.level);e.parentIndex=Math.max(...i),n[e.level]=t}));const i=[];return t.forEach((e=>{const{parentIndex:n,...a}=e;n>=0?t[n].children.push(a):i.push(a)})),i}function s(e){let{toc:t,minHeadingLevel:n,maxHeadingLevel:i}=e;return t.flatMap((e=>{const t=s({toc:e.children,minHeadingLevel:n,maxHeadingLevel:i});return function(e){return e.level>=n&&e.level<=i}(e)?[{...e,children:t}]:t}))}function l(e){const t=e.getBoundingClientRect();return t.top===t.bottom?l(e.parentNode):t}function o(e,t){var n;let{anchorTopOffset:i}=t;const a=e.find((e=>l(e).top>=i));if(a){var r;return function(e){return e.top>0&&e.bottom<window.innerHeight/2}(l(a))?a:null!=(r=e[e.indexOf(a)-1])?r:null}return null!=(n=e[e.length-1])?n:null}function c(){const e=(0,i.useRef)(0),{navbar:{hideOnScroll:t}}=(0,a.L)();return(0,i.useEffect)((()=>{e.current=t?0:document.querySelector(".navbar").clientHeight}),[t]),e}function d(e){const t=(0,i.useRef)(void 0),n=c();(0,i.useEffect)((()=>{if(!e)return()=>{};const{linkClassName:i,linkActiveClassName:a,minHeadingLevel:r,maxHeadingLevel:s}=e;function l(){const e=function(e){return Array.from(document.getElementsByClassName(e))}(i),l=function(e){let{minHeadingLevel:t,maxHeadingLevel:n}=e;const i=[];for(let a=t;a<=n;a+=1)i.push("h"+a+".anchor");return Array.from(document.querySelectorAll(i.join()))}({minHeadingLevel:r,maxHeadingLevel:s}),c=o(l,{anchorTopOffset:n.current}),d=e.find((e=>c&&c.id===function(e){return decodeURIComponent(e.href.substring(e.href.indexOf("#")+1))}(e)));e.forEach((e=>{!function(e,n){n?(t.current&&t.current!==e&&t.current.classList.remove(a),e.classList.add(a),t.current=e):e.classList.remove(a)}(e,e===d)}))}return document.addEventListener("scroll",l),document.addEventListener("resize",l),l(),()=>{document.removeEventListener("scroll",l),document.removeEventListener("resize",l)}}),[e,n])}var h=n(3692),u=n(5893);function g(e){let{toc:t,className:n,linkClassName:i,isChild:a}=e;return t.length?(0,u.jsx)("ul",{className:a?void 0:n,children:t.map((e=>(0,u.jsxs)("li",{children:[(0,u.jsx)(h.Z,{to:"#"+e.id,className:null!=i?i:void 0,dangerouslySetInnerHTML:{__html:e.value}}),(0,u.jsx)(g,{isChild:!0,toc:e.children,className:n,linkClassName:i})]},e.id)))}):null}const p=i.memo(g);function m(e){let{toc:t,className:n="table-of-contents table-of-contents__left-border",linkClassName:l="table-of-contents__link",linkActiveClassName:o,minHeadingLevel:c,maxHeadingLevel:h,...g}=e;const m=(0,a.L)(),v=null!=c?c:m.tableOfContents.minHeadingLevel,f=null!=h?h:m.tableOfContents.maxHeadingLevel,x=function(e){let{toc:t,minHeadingLevel:n,maxHeadingLevel:a}=e;return(0,i.useMemo)((()=>s({toc:r(t),minHeadingLevel:n,maxHeadingLevel:a})),[t,n,a])}({toc:t,minHeadingLevel:v,maxHeadingLevel:f});return d((0,i.useMemo)((()=>{if(l&&o)return{linkClassName:l,linkActiveClassName:o,minHeadingLevel:v,maxHeadingLevel:f}}),[l,o,v,f])),(0,u.jsx)(p,{toc:x,className:n,linkClassName:l,...g})}},1151:(e,t,n)=>{n.d(t,{a:()=>s});var i=n(7294);const a={},r=i.createContext(a);function s(e){const t=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}}}]);