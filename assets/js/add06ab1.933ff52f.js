"use strict";(self.webpackChunkreact_native_testing_library_website=self.webpackChunkreact_native_testing_library_website||[]).push([[725],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>g});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),p=c(n),d=r,g=p["".concat(s,".").concat(d)]||p[d]||m[d]||i;return n?a.createElement(g,l(l({ref:t},u),{},{components:n})):a.createElement(g,l({ref:t},u))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=d;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[p]="string"==typeof e?e:r,l[1]=o;for(var c=2;c<i;c++)l[c]=n[c];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},3901:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(7294),r=n(3743);const i={tableOfContentsInline:"tableOfContentsInline_prmo"};function l(e){let{toc:t,minHeadingLevel:n,maxHeadingLevel:l}=e;return a.createElement("div",{className:i.tableOfContentsInline},a.createElement(r.Z,{toc:t,minHeadingLevel:n,maxHeadingLevel:l,className:"table-of-contents",linkClassName:null}))}},3743:(e,t,n)=>{n.d(t,{Z:()=>g});var a=n(7462),r=n(7294),i=n(6668);function l(e){const t=e.map((e=>({...e,parentIndex:-1,children:[]}))),n=Array(7).fill(-1);t.forEach(((e,t)=>{const a=n.slice(2,e.level);e.parentIndex=Math.max(...a),n[e.level]=t}));const a=[];return t.forEach((e=>{const{parentIndex:n,...r}=e;n>=0?t[n].children.push(r):a.push(r)})),a}function o(e){let{toc:t,minHeadingLevel:n,maxHeadingLevel:a}=e;return t.flatMap((e=>{const t=o({toc:e.children,minHeadingLevel:n,maxHeadingLevel:a});return function(e){return e.level>=n&&e.level<=a}(e)?[{...e,children:t}]:t}))}function s(e){const t=e.getBoundingClientRect();return t.top===t.bottom?s(e.parentNode):t}function c(e,t){var n;let{anchorTopOffset:a}=t;const r=e.find((e=>s(e).top>=a));if(r){var i;return function(e){return e.top>0&&e.bottom<window.innerHeight/2}(s(r))?r:null!=(i=e[e.indexOf(r)-1])?i:null}return null!=(n=e[e.length-1])?n:null}function u(){const e=(0,r.useRef)(0),{navbar:{hideOnScroll:t}}=(0,i.L)();return(0,r.useEffect)((()=>{e.current=t?0:document.querySelector(".navbar").clientHeight}),[t]),e}function p(e){const t=(0,r.useRef)(void 0),n=u();(0,r.useEffect)((()=>{if(!e)return()=>{};const{linkClassName:a,linkActiveClassName:r,minHeadingLevel:i,maxHeadingLevel:l}=e;function o(){const e=function(e){return Array.from(document.getElementsByClassName(e))}(a),o=function(e){let{minHeadingLevel:t,maxHeadingLevel:n}=e;const a=[];for(let r=t;r<=n;r+=1)a.push("h"+r+".anchor");return Array.from(document.querySelectorAll(a.join()))}({minHeadingLevel:i,maxHeadingLevel:l}),s=c(o,{anchorTopOffset:n.current}),u=e.find((e=>s&&s.id===function(e){return decodeURIComponent(e.href.substring(e.href.indexOf("#")+1))}(e)));e.forEach((e=>{!function(e,n){n?(t.current&&t.current!==e&&t.current.classList.remove(r),e.classList.add(r),t.current=e):e.classList.remove(r)}(e,e===u)}))}return document.addEventListener("scroll",o),document.addEventListener("resize",o),o(),()=>{document.removeEventListener("scroll",o),document.removeEventListener("resize",o)}}),[e,n])}function m(e){let{toc:t,className:n,linkClassName:a,isChild:i}=e;return t.length?r.createElement("ul",{className:i?void 0:n},t.map((e=>r.createElement("li",{key:e.id},r.createElement("a",{href:"#"+e.id,className:null!=a?a:void 0,dangerouslySetInnerHTML:{__html:e.value}}),r.createElement(m,{isChild:!0,toc:e.children,className:n,linkClassName:a}))))):null}const d=r.memo(m);function g(e){let{toc:t,className:n="table-of-contents table-of-contents__left-border",linkClassName:s="table-of-contents__link",linkActiveClassName:c,minHeadingLevel:u,maxHeadingLevel:m,...g}=e;const f=(0,i.L)(),h=null!=u?u:f.tableOfContents.minHeadingLevel,v=null!=m?m:f.tableOfContents.maxHeadingLevel,b=function(e){let{toc:t,minHeadingLevel:n,maxHeadingLevel:a}=e;return(0,r.useMemo)((()=>o({toc:l(t),minHeadingLevel:n,maxHeadingLevel:a})),[t,n,a])}({toc:t,minHeadingLevel:h,maxHeadingLevel:v});return p((0,r.useMemo)((()=>{if(s&&c)return{linkClassName:s,linkActiveClassName:c,minHeadingLevel:h,maxHeadingLevel:v}}),[s,c,h,v])),r.createElement(d,(0,a.Z)({toc:b,className:n,linkClassName:s},g))}},1894:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>l,metadata:()=>s,toc:()=>u});var a=n(7462),r=(n(7294),n(3905)),i=n(3901);const l={id:"migration-v11",title:"Migration to 11.0"},o=void 0,s={unversionedId:"migration-v11",id:"migration-v11",title:"Migration to 11.0",description:"Migration to React Native Testing Library version 11 from version 9.x or 10.x should be a relatively easy task due small amount of breaking changes.",source:"@site/docs/MigrationV11.md",sourceDirName:".",slug:"/migration-v11",permalink:"/react-native-testing-library/docs/migration-v11",draft:!1,editUrl:"https://github.com/callstack/react-native-testing-library/blob/main/website/docs/MigrationV11.md",tags:[],version:"current",frontMatter:{id:"migration-v11",title:"Migration to 11.0"},sidebar:"docs",previous:{title:"Migration to 12.0",permalink:"/react-native-testing-library/docs/migration-v12"},next:{title:"Migration to 9.0",permalink:"/react-native-testing-library/docs/migration-v9"}},c={},u=[{value:"Update to Jest 28 if you use fake timers",id:"update-to-jest-28-if-you-use-fake-timers",level:3},{value:"Refactor legacy <code>waitForOptions</code> position",id:"refactor-legacy-waitforoptions-position",level:3},{value:"Triggering non-touch events on targets with <code>pointerEvents=&quot;box-none&quot;</code> prop",id:"triggering-non-touch-events-on-targets-with-pointereventsbox-none-prop",level:3},{value:"All changes",id:"all-changes",level:2},{value:"Full Changelog",id:"full-changelog",level:2}],p={toc:u},m="wrapper";function d(e){let{components:t,...n}=e;return(0,r.kt)(m,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Migration to React Native Testing Library version 11 from version 9.x or 10.x should be a relatively easy task due small amount of breaking changes."),(0,r.kt)(i.Z,{toc:u,mdxType:"TOCInline"}),(0,r.kt)("h1",{id:"breaking-changes"},"Breaking changes"),(0,r.kt)("h3",{id:"update-to-jest-28-if-you-use-fake-timers"},"Update to Jest 28 if you use fake timers"),(0,r.kt)("p",null,"If you use fake timers in any of your tests you should update your Jest dependencies to version 28. This is due to the fact that ",(0,r.kt)("a",{parentName:"p",href:"https://jestjs.io/docs/jest-object#jestusefaketimersfaketimersconfig"},(0,r.kt)("inlineCode",{parentName:"a"},"jest.useFakeTimers()")," config structure")," has changed."),(0,r.kt)("h3",{id:"refactor-legacy-waitforoptions-position"},"Refactor legacy ",(0,r.kt)("inlineCode",{parentName:"h3"},"waitForOptions")," position"),(0,r.kt)("p",null,"In version 9 we introducted query ",(0,r.kt)("inlineCode",{parentName:"p"},"options")," parameters for each query type. This affected all ",(0,r.kt)("inlineCode",{parentName:"p"},"findBy")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"findAllBy")," queries because their signatures changed e.g. from:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"function findByText(text: TextMatch, waitForOptions?: WaitForOptions)\nfunction findAllByText(text: TextMatch, waitForOptions?: WaitForOptions)\n")),(0,r.kt)("p",null,"to "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"function findByText(text: TextMatch, options?: TextMatchOptions, waitForOptions?: WaitForOptions)\nfunction findAllByText(text: TextMatch, options?: TextMatchOptions, waitForOptions?: WaitForOptions)\n")),(0,r.kt)("p",null,"In order to facilitate transition, in version 9 and 10, we provided a temporary possibility to pass ",(0,r.kt)("inlineCode",{parentName:"p"},"WaitForOptions")," like ",(0,r.kt)("inlineCode",{parentName:"p"},"timeout"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"interval"),", etc inside ",(0,r.kt)("inlineCode",{parentName:"p"},"options")," argument. From this release we require passing these as the proper third parameter."),(0,r.kt)("p",null,"This change is easy to implement:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"findByText(/Text/, { timeout: 1000 })\n")),(0,r.kt)("p",null,"should become"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"findByText(/Text/, {}, { timeout: 1000 })\n")),(0,r.kt)("h3",{id:"triggering-non-touch-events-on-targets-with-pointereventsbox-none-prop"},"Triggering non-touch events on targets with ",(0,r.kt)("inlineCode",{parentName:"h3"},'pointerEvents="box-none"')," prop"),(0,r.kt)("p",null,"Up to version 10, RNTL disables all events for a target with ",(0,r.kt)("inlineCode",{parentName:"p"},'pointerEvents="box-none"'),". This behavior is counter to how React Native itself functions. "),(0,r.kt)("p",null,"From version 11, RNTL continues to disable ",(0,r.kt)("inlineCode",{parentName:"p"},"press")," event for these targets but allows triggering other events, e.g. ",(0,r.kt)("inlineCode",{parentName:"p"},"layout"),"."),(0,r.kt)("h2",{id:"all-changes"},"All changes"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"chore(breaking): update Jest to 28 by @mdjastrzebski in ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/callstack/react-native-testing-library/pull/1008"},"https://github.com/callstack/react-native-testing-library/pull/1008")),(0,r.kt)("li",{parentName:"ul"},"refactor(breaking): remove legacy wait for options support by @mdjastrzebski in ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/callstack/react-native-testing-library/pull/1018"},"https://github.com/callstack/react-native-testing-library/pull/1018")),(0,r.kt)("li",{parentName:"ul"},"refactor(breaking): remove ",(0,r.kt)("inlineCode",{parentName:"li"},"byA11yStates")," queries by @mdjastrzebski in ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/callstack/react-native-testing-library/pull/1015"},"https://github.com/callstack/react-native-testing-library/pull/1015")),(0,r.kt)("li",{parentName:"ul"},"chore: update react-native to 0.69.1 by @mdjastrzebski in ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/callstack/react-native-testing-library/pull/1010"},"https://github.com/callstack/react-native-testing-library/pull/1010")),(0,r.kt)("li",{parentName:"ul"},"chore: update deps @types for react/react-native by @mdjastrzebski in ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/callstack/react-native-testing-library/pull/1013"},"https://github.com/callstack/react-native-testing-library/pull/1013")),(0,r.kt)("li",{parentName:"ul"},"feat: Trigger non-touch events on box-none targets by @dcalhoun in ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/callstack/react-native-testing-library/pull/906"},"https://github.com/callstack/react-native-testing-library/pull/906")),(0,r.kt)("li",{parentName:"ul"},"docs: create document describing act function and related errors by @mdjastrzebski in ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/callstack/react-native-testing-library/pull/969"},"https://github.com/callstack/react-native-testing-library/pull/969")),(0,r.kt)("li",{parentName:"ul"},"chore: Organise a11y queries by predicate by @MattAgn in ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/callstack/react-native-testing-library/pull/977"},"https://github.com/callstack/react-native-testing-library/pull/977")),(0,r.kt)("li",{parentName:"ul"},"chore: reenable skipped byText tests by @mdjastrzebski in ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/callstack/react-native-testing-library/pull/1017"},"https://github.com/callstack/react-native-testing-library/pull/1017"))),(0,r.kt)("h2",{id:"full-changelog"},"Full Changelog"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/callstack/react-native-testing-library/compare/v10.1.1...v11.0.0"},"https://github.com/callstack/react-native-testing-library/compare/v10.1.1...v11.0.0")))}d.isMDXComponent=!0}}]);