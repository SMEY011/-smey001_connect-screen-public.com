"use strict";(self.webpackChunkreact_native_testing_library_website=self.webpackChunkreact_native_testing_library_website||[]).push([[430],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>y});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,l=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),d=p(n),u=i,y=d["".concat(s,".").concat(u)]||d[u]||m[u]||l;return n?a.createElement(y,r(r({ref:t},c),{},{components:n})):a.createElement(y,r({ref:t},c))}));function y(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var l=n.length,r=new Array(l);r[0]=u;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[d]="string"==typeof e?e:i,r[1]=o;for(var p=2;p<l;p++)r[p]=n[p];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},3901:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(7294),i=n(3743);const l={tableOfContentsInline:"tableOfContentsInline_prmo"};function r(e){let{toc:t,minHeadingLevel:n,maxHeadingLevel:r}=e;return a.createElement("div",{className:l.tableOfContentsInline},a.createElement(i.Z,{toc:t,minHeadingLevel:n,maxHeadingLevel:r,className:"table-of-contents",linkClassName:null}))}},3743:(e,t,n)=>{n.d(t,{Z:()=>y});var a=n(7462),i=n(7294),l=n(6668);function r(e){const t=e.map((e=>({...e,parentIndex:-1,children:[]}))),n=Array(7).fill(-1);t.forEach(((e,t)=>{const a=n.slice(2,e.level);e.parentIndex=Math.max(...a),n[e.level]=t}));const a=[];return t.forEach((e=>{const{parentIndex:n,...i}=e;n>=0?t[n].children.push(i):a.push(i)})),a}function o(e){let{toc:t,minHeadingLevel:n,maxHeadingLevel:a}=e;return t.flatMap((e=>{const t=o({toc:e.children,minHeadingLevel:n,maxHeadingLevel:a});return function(e){return e.level>=n&&e.level<=a}(e)?[{...e,children:t}]:t}))}function s(e){const t=e.getBoundingClientRect();return t.top===t.bottom?s(e.parentNode):t}function p(e,t){var n;let{anchorTopOffset:a}=t;const i=e.find((e=>s(e).top>=a));if(i){var l;return function(e){return e.top>0&&e.bottom<window.innerHeight/2}(s(i))?i:null!=(l=e[e.indexOf(i)-1])?l:null}return null!=(n=e[e.length-1])?n:null}function c(){const e=(0,i.useRef)(0),{navbar:{hideOnScroll:t}}=(0,l.L)();return(0,i.useEffect)((()=>{e.current=t?0:document.querySelector(".navbar").clientHeight}),[t]),e}function d(e){const t=(0,i.useRef)(void 0),n=c();(0,i.useEffect)((()=>{if(!e)return()=>{};const{linkClassName:a,linkActiveClassName:i,minHeadingLevel:l,maxHeadingLevel:r}=e;function o(){const e=function(e){return Array.from(document.getElementsByClassName(e))}(a),o=function(e){let{minHeadingLevel:t,maxHeadingLevel:n}=e;const a=[];for(let i=t;i<=n;i+=1)a.push("h"+i+".anchor");return Array.from(document.querySelectorAll(a.join()))}({minHeadingLevel:l,maxHeadingLevel:r}),s=p(o,{anchorTopOffset:n.current}),c=e.find((e=>s&&s.id===function(e){return decodeURIComponent(e.href.substring(e.href.indexOf("#")+1))}(e)));e.forEach((e=>{!function(e,n){n?(t.current&&t.current!==e&&t.current.classList.remove(i),e.classList.add(i),t.current=e):e.classList.remove(i)}(e,e===c)}))}return document.addEventListener("scroll",o),document.addEventListener("resize",o),o(),()=>{document.removeEventListener("scroll",o),document.removeEventListener("resize",o)}}),[e,n])}function m(e){let{toc:t,className:n,linkClassName:a,isChild:l}=e;return t.length?i.createElement("ul",{className:l?void 0:n},t.map((e=>i.createElement("li",{key:e.id},i.createElement("a",{href:"#"+e.id,className:null!=a?a:void 0,dangerouslySetInnerHTML:{__html:e.value}}),i.createElement(m,{isChild:!0,toc:e.children,className:n,linkClassName:a}))))):null}const u=i.memo(m);function y(e){let{toc:t,className:n="table-of-contents table-of-contents__left-border",linkClassName:s="table-of-contents__link",linkActiveClassName:p,minHeadingLevel:c,maxHeadingLevel:m,...y}=e;const k=(0,l.L)(),h=null!=c?c:k.tableOfContents.minHeadingLevel,N=null!=m?m:k.tableOfContents.maxHeadingLevel,b=function(e){let{toc:t,minHeadingLevel:n,maxHeadingLevel:a}=e;return(0,i.useMemo)((()=>o({toc:r(t),minHeadingLevel:n,maxHeadingLevel:a})),[t,n,a])}({toc:t,minHeadingLevel:h,maxHeadingLevel:N});return d((0,i.useMemo)((()=>{if(s&&p)return{linkClassName:s,linkActiveClassName:p,minHeadingLevel:h,maxHeadingLevel:N}}),[s,p,h,N])),i.createElement(u,(0,a.Z)({toc:b,className:n,linkClassName:s},y))}},6214:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var a=n(7462),i=(n(7294),n(3905)),l=n(3901);const r={id:"api-queries",title:"Queries"},o=void 0,s={unversionedId:"api-queries",id:"api-queries",title:"Queries",description:"Query Variants",source:"@site/docs/Queries.md",sourceDirName:".",slug:"/api-queries",permalink:"/react-native-testing-library/docs/api-queries",draft:!1,editUrl:"https://github.com/callstack/react-native-testing-library/blob/main/website/docs/Queries.md",tags:[],version:"current",frontMatter:{id:"api-queries",title:"Queries"},sidebar:"docs",previous:{title:"API",permalink:"/react-native-testing-library/docs/api"},next:{title:"Jest Matchers",permalink:"/react-native-testing-library/docs/jest-matchers"}},p={},c=[{value:"Query Variants",id:"query-variants",level:2},{value:"<code>getBy*</code> queries",id:"get-by",level:3},{value:"<code>getAllBy*</code> queries",id:"get-all-by",level:3},{value:"<code>queryBy*</code> queries",id:"query-by",level:3},{value:"<code>queryAllBy*</code> queries",id:"query-all-by",level:3},{value:"<code>findBy*</code> queries",id:"find-by",level:3},{value:"<code>findAllBy*</code> queries",id:"find-all-by",level:3},{value:"Query Predicates",id:"query-predicates",level:2},{value:"<code>ByRole</code>",id:"by-role",level:3},{value:"Options",id:"by-role-options",level:4},{value:"<code>ByText</code>",id:"by-text",level:3},{value:"<code>ByPlaceholderText</code>",id:"by-placeholder-text",level:3},{value:"<code>ByDisplayValue</code>",id:"by-display-value",level:3},{value:"<code>ByTestId</code>",id:"by-test-id",level:3},{value:"<code>ByLabelText</code>",id:"by-label-text",level:3},{value:"<code>ByHintText</code>, <code>ByA11yHint</code>, <code>ByAccessibilityHint</code>",id:"by-hint-text",level:3},{value:"<code>ByA11yState</code>, <code>ByAccessibilityState</code> (deprecated)",id:"by-accessibility-state",level:3},{value:"<code>ByA11yValue</code>, <code>ByAccessibilityValue</code> (deprecated)",id:"by-accessibility-value",level:3},{value:"Normalization Examples",id:"normalization-examples",level:5},{value:"Legacy unit testing helpers",id:"legacy-unit-testing-helpers",level:2},{value:"<code>UNSAFE_ByType</code>",id:"unsafe_bytype",level:3},{value:"<code>UNSAFE_ByProps</code>",id:"unsafe_byprops",level:3}],d={toc:c},m="wrapper";function u(e){let{components:t,...n}=e;return(0,i.kt)(m,(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)(l.Z,{toc:c,mdxType:"TOCInline"}),(0,i.kt)("h2",{id:"query-variants"},"Query Variants"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("inlineCode",{parentName:"p"},"getBy*")," queries are shown by default in the ",(0,i.kt)("a",{parentName:"p",href:"#queries"},"query documentation"),"\nbelow.")),(0,i.kt)("h3",{id:"get-by"},(0,i.kt)("inlineCode",{parentName:"h3"},"getBy*")," queries"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"getBy*")," queries return the first matching node for a query, and throw an error if no elements match or if more than one match is found. If you need to find more than one element, then use ",(0,i.kt)("inlineCode",{parentName:"p"},"getAllBy"),"."),(0,i.kt)("h3",{id:"get-all-by"},(0,i.kt)("inlineCode",{parentName:"h3"},"getAllBy*")," queries"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"getAllBy*")," queries return an array of all matching nodes for a query, and throw an error if no elements match."),(0,i.kt)("h3",{id:"query-by"},(0,i.kt)("inlineCode",{parentName:"h3"},"queryBy*")," queries"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"queryBy*")," queries return the first matching node for a query, and return ",(0,i.kt)("inlineCode",{parentName:"p"},"null")," if no elements match. This is useful for asserting an element that is not present. This throws if more than one match is found (use ",(0,i.kt)("inlineCode",{parentName:"p"},"queryAllBy")," instead)."),(0,i.kt)("h3",{id:"query-all-by"},(0,i.kt)("inlineCode",{parentName:"h3"},"queryAllBy*")," queries"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"queryAllBy*")," queries return an array of all matching nodes for a query, and return an empty array (",(0,i.kt)("inlineCode",{parentName:"p"},"[]"),") when no elements match."),(0,i.kt)("h3",{id:"find-by"},(0,i.kt)("inlineCode",{parentName:"h3"},"findBy*")," queries"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"findBy*")," queries return a promise which resolves when a matching element is found. The promise is rejected if no elements match or if more than one match is found after a default timeout of 1000 ms. If you need to find more than one element, then use ",(0,i.kt)("inlineCode",{parentName:"p"},"findAllBy*"),"."),(0,i.kt)("h3",{id:"find-all-by"},(0,i.kt)("inlineCode",{parentName:"h3"},"findAllBy*")," queries"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"findAllBy*")," queries return a promise which resolves to an array of matching elements. The promise is rejected if no elements match after a default timeout of 1000 ms."),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("inlineCode",{parentName:"p"},"findBy*")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"findAllBy*")," queries accept optional ",(0,i.kt)("inlineCode",{parentName:"p"},"waitForOptions")," object argument which can contain ",(0,i.kt)("inlineCode",{parentName:"p"},"timeout"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"interval")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"onTimeout")," properies which have the same meaning as respective options for ",(0,i.kt)("a",{parentName:"p",href:"api#waitfor"},(0,i.kt)("inlineCode",{parentName:"a"},"waitFor"))," function.")),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"In cases when your ",(0,i.kt)("inlineCode",{parentName:"p"},"findBy*")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"findAllBy*")," queries throw when not able to find matching elements it is useful to pass ",(0,i.kt)("inlineCode",{parentName:"p"},"onTimeout: () => { screen.debug(); }")," callback using ",(0,i.kt)("inlineCode",{parentName:"p"},"waitForOptions")," parameter.")),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"In order to properly use ",(0,i.kt)("inlineCode",{parentName:"p"},"findBy*")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"findAllBy*")," queries you need at least React >=16.9.0 (featuring async ",(0,i.kt)("inlineCode",{parentName:"p"},"act"),") or React Native >=0.61 (which comes with React >=16.9.0).")),(0,i.kt)("h2",{id:"query-predicates"},"Query Predicates"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"Note: most methods like this one return a ",(0,i.kt)("a",{parentName:"em",href:"https://reactjs.org/docs/test-renderer.html#testinstance"},(0,i.kt)("inlineCode",{parentName:"a"},"ReactTestInstance"))," with following properties that you may be interested in:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"type ReactTestInstance = {\n  type: string | Function;\n  props: { [propName: string]: any };\n  parent: ReactTestInstance | null;\n  children: Array<ReactTestInstance | string>;\n};\n")),(0,i.kt)("h3",{id:"by-role"},(0,i.kt)("inlineCode",{parentName:"h3"},"ByRole")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"getByRole, getAllByRole, queryByRole, queryAllByRole, findByRole, findAllByRole")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"getByRole(\n  role: TextMatch,\n  options?: {\n    name?: TextMatch\n    disabled?: boolean,\n    selected?: boolean,\n    checked?: boolean | 'mixed',\n    busy?: boolean,\n    expanded?: boolean,\n    value: {\n      min?: number;\n      max?: number;\n      now?: number;\n      text?: TextMatch;\n    },\n    includeHiddenElements?: boolean;\n  }\n): ReactTestInstance;\n")),(0,i.kt)("p",null,"Returns a ",(0,i.kt)("inlineCode",{parentName:"p"},"ReactTestInstance")," with matching ",(0,i.kt)("inlineCode",{parentName:"p"},"role")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"accessibilityRole")," prop."),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"In order for ",(0,i.kt)("inlineCode",{parentName:"p"},"*ByRole")," queries to match an element it needs to be considered an accessibility element:"),(0,i.kt)("ol",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"Text"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"TextInput")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"Switch")," host elements are these by default."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"View")," host elements need an explicit ",(0,i.kt)("a",{parentName:"li",href:"https://reactnative.dev/docs/accessibility#accessible"},(0,i.kt)("inlineCode",{parentName:"a"},"accessible"))," prop set to ",(0,i.kt)("inlineCode",{parentName:"li"},"true")),(0,i.kt)("li",{parentName:"ol"},"Some React Native composite components like ",(0,i.kt)("inlineCode",{parentName:"li"},"Pressable")," & ",(0,i.kt)("inlineCode",{parentName:"li"},"TouchableOpacity")," render host ",(0,i.kt)("inlineCode",{parentName:"li"},"View")," element with ",(0,i.kt)("inlineCode",{parentName:"li"},"accessible")," prop already set."))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx"},"import { render, screen } from '@testing-library/react-native';\n\nrender(\n  <Pressable accessibilityRole=\"button\" disabled>\n    <Text>Hello</Text>\n  </Pressable>\n);\nconst element = screen.getByRole('button');\nconst element2 = screen.getByRole('button', { name: 'Hello' });\nconst element3 = screen.getByRole('button', { name: 'Hello', disabled: true });\n")),(0,i.kt)("h4",{id:"by-role-options"},"Options"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"name"),": Finds an element with given ",(0,i.kt)("inlineCode",{parentName:"p"},"role"),"/",(0,i.kt)("inlineCode",{parentName:"p"},"accessibilityRole")," and an accessible name (= accessability label or text content).")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"disabled"),": You can filter elements by their disabled state (coming either from ",(0,i.kt)("inlineCode",{parentName:"p"},"aria-disabled")," prop or ",(0,i.kt)("inlineCode",{parentName:"p"},"accessbilityState.disabled")," prop). The possible values are ",(0,i.kt)("inlineCode",{parentName:"p"},"true")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"false"),". Querying ",(0,i.kt)("inlineCode",{parentName:"p"},"disabled: false")," will also match elements with ",(0,i.kt)("inlineCode",{parentName:"p"},"disabled: undefined")," (see the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/callstack/react-native-testing-library/wiki/Accessibility:-State"},"wiki")," for more details)."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"See ",(0,i.kt)("a",{parentName:"li",href:"https://reactnative.dev/docs/accessibility#accessibilitystate"},"React Native's accessibilityState")," docs to learn more about the ",(0,i.kt)("inlineCode",{parentName:"li"},"disabled")," state."),(0,i.kt)("li",{parentName:"ul"},"This option can alternatively be expressed using the ",(0,i.kt)("a",{parentName:"li",href:"jest-matchers#tobeenabled"},(0,i.kt)("inlineCode",{parentName:"a"},"toBeEnabled()")," / ",(0,i.kt)("inlineCode",{parentName:"a"},"toBeDisabled()"))," Jest matchers."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"selected"),": You can filter elements by their selected state (coming either from ",(0,i.kt)("inlineCode",{parentName:"p"},"aria-selected")," prop or ",(0,i.kt)("inlineCode",{parentName:"p"},"accessbilityState.selected")," prop). The possible values are ",(0,i.kt)("inlineCode",{parentName:"p"},"true")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"false"),". Querying ",(0,i.kt)("inlineCode",{parentName:"p"},"selected: false")," will also match elements with ",(0,i.kt)("inlineCode",{parentName:"p"},"selected: undefined")," (see the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/callstack/react-native-testing-library/wiki/Accessibility:-State"},"wiki")," for more details)."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"See ",(0,i.kt)("a",{parentName:"li",href:"https://reactnative.dev/docs/accessibility#accessibilitystate"},"React Native's accessibilityState")," docs to learn more about the ",(0,i.kt)("inlineCode",{parentName:"li"},"selected")," state."),(0,i.kt)("li",{parentName:"ul"},"This option can alternatively be expressed using the ",(0,i.kt)("a",{parentName:"li",href:"jest-matchers#tobeselected"},(0,i.kt)("inlineCode",{parentName:"a"},"toBeSelected()"))," Jest matcher.")))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"checked"),": You can filter elements by their checked state (coming either from ",(0,i.kt)("inlineCode",{parentName:"p"},"aria-checked")," prop or ",(0,i.kt)("inlineCode",{parentName:"p"},"accessbilityState.checked")," prop). The possible values are ",(0,i.kt)("inlineCode",{parentName:"p"},"true"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"false"),", or ",(0,i.kt)("inlineCode",{parentName:"p"},'"mixed"'),"."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"See ",(0,i.kt)("a",{parentName:"li",href:"https://reactnative.dev/docs/accessibility#accessibilitystate"},"React Native's accessibilityState")," docs to learn more about the ",(0,i.kt)("inlineCode",{parentName:"li"},"checked")," state."),(0,i.kt)("li",{parentName:"ul"},"This option can alternatively be expressed using the ",(0,i.kt)("a",{parentName:"li",href:"jest-matchers#tobechecked"},(0,i.kt)("inlineCode",{parentName:"a"},"toBeChecked()")," / ",(0,i.kt)("inlineCode",{parentName:"a"},"toBePartiallyChecked()"))," Jest matchers."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"busy"),": You can filter elements by their busy state (coming either from ",(0,i.kt)("inlineCode",{parentName:"p"},"aria-busy")," prop or ",(0,i.kt)("inlineCode",{parentName:"p"},"accessbilityState.busy")," prop). The possible values are ",(0,i.kt)("inlineCode",{parentName:"p"},"true")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"false"),". Querying ",(0,i.kt)("inlineCode",{parentName:"p"},"busy: false")," will also match elements with ",(0,i.kt)("inlineCode",{parentName:"p"},"busy: undefined")," (see the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/callstack/react-native-testing-library/wiki/Accessibility:-State"},"wiki")," for more details)."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"See ",(0,i.kt)("a",{parentName:"li",href:"https://reactnative.dev/docs/accessibility#accessibilitystate"},"React Native's accessibilityState")," docs to learn more about the ",(0,i.kt)("inlineCode",{parentName:"li"},"busy")," state."),(0,i.kt)("li",{parentName:"ul"},"This option can alternatively be expressed using the ",(0,i.kt)("a",{parentName:"li",href:"jest-matchers#tobebusy"},(0,i.kt)("inlineCode",{parentName:"a"},"toBeBusy()"))," Jest matcher."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"expanded"),": You can filter elements by their expanded state (coming either from ",(0,i.kt)("inlineCode",{parentName:"p"},"aria-expanded")," prop or ",(0,i.kt)("inlineCode",{parentName:"p"},"accessbilityState.expanded")," prop). The possible values are ",(0,i.kt)("inlineCode",{parentName:"p"},"true")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"false"),"."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"See ",(0,i.kt)("a",{parentName:"li",href:"https://reactnative.dev/docs/accessibility#accessibilitystate"},"React Native's accessibilityState")," docs to learn more about the ",(0,i.kt)("inlineCode",{parentName:"li"},"expanded")," state."),(0,i.kt)("li",{parentName:"ul"},"This option can alternatively be expressed using the ",(0,i.kt)("a",{parentName:"li",href:"jest-matchers#tobeexpanded"},(0,i.kt)("inlineCode",{parentName:"a"},"toBeExpanded()")," / ",(0,i.kt)("inlineCode",{parentName:"a"},"toBeCollapsed()"))," Jest matchers."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"value"),": Filter elements by their accessibility value, based on either ",(0,i.kt)("inlineCode",{parentName:"p"},"aria-valuemin"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"aria-valuemax"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"aria-valuenow"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"aria-valuetext")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"accessibilityValue")," props. Accessiblity value conceptually consists of numeric ",(0,i.kt)("inlineCode",{parentName:"p"},"min"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"max")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"now")," entries, as well as string ",(0,i.kt)("inlineCode",{parentName:"p"},"text")," entry."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"See React Native ",(0,i.kt)("a",{parentName:"li",href:"https://reactnative.dev/docs/accessibility#accessibilityvalue"},"accessibilityValue")," docs to learn more about the accessibility value concept."),(0,i.kt)("li",{parentName:"ul"},"This option can alternatively be expressed using the ",(0,i.kt)("a",{parentName:"li",href:"jest-matchers#tohaveaccessibilityvalue"},(0,i.kt)("inlineCode",{parentName:"a"},"toHaveAccessibilityValue()"))," Jest matcher.")))),(0,i.kt)("h3",{id:"by-text"},(0,i.kt)("inlineCode",{parentName:"h3"},"ByText")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"getByText, getAllByText, queryByText, queryAllByText, findByText, findAllByText")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"getByText(\n  text: TextMatch,\n  options?: {\n    exact?: boolean;\n    normalizer?: (text: string) => string;\n    includeHiddenElements?: boolean;\n  }\n): ReactTestInstance;\n")),(0,i.kt)("p",null,"Returns a ",(0,i.kt)("inlineCode",{parentName:"p"},"ReactTestInstance")," with matching text \u2013 may be a string or regular expression."),(0,i.kt)("p",null,"This method will join ",(0,i.kt)("inlineCode",{parentName:"p"},"<Text>")," siblings to find matches, similarly to ",(0,i.kt)("a",{parentName:"p",href:"https://reactnative.dev/docs/text#containers"},"how React Native handles these components"),". This will allow for querying for strings that will be visually rendered together, but may be semantically separate React components."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx"},"import { render, screen } from '@testing-library/react-native';\n\nrender(<MyComponent />);\nconst element = screen.getByText('banana');\n")),(0,i.kt)("h3",{id:"by-placeholder-text"},(0,i.kt)("inlineCode",{parentName:"h3"},"ByPlaceholderText")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"getByPlaceholderText, getAllByPlaceholderText, queryByPlaceholderText, queryAllByPlaceholderText, findByPlaceholderText, findAllByPlaceholderText")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"getByPlaceholderText(\n  text: TextMatch,\n  options?: {\n    exact?: boolean;\n    normalizer?: (text: string) => string;\n    includeHiddenElements?: boolean;\n  }\n): ReactTestInstance;\n")),(0,i.kt)("p",null,"Returns a ",(0,i.kt)("inlineCode",{parentName:"p"},"ReactTestInstance")," for a ",(0,i.kt)("inlineCode",{parentName:"p"},"TextInput")," with a matching placeholder \u2013 may be a string or regular expression."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx"},"import { render, screen } from '@testing-library/react-native';\n\nrender(<MyComponent />);\nconst element = screen.getByPlaceholderText('username');\n")),(0,i.kt)("h3",{id:"by-display-value"},(0,i.kt)("inlineCode",{parentName:"h3"},"ByDisplayValue")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"getByDisplayValue, getAllByDisplayValue, queryByDisplayValue, queryAllByDisplayValue, findByDisplayValue, findAllByDisplayValue")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"getByDisplayValue(\n  value: TextMatch,\n  options?: {\n    exact?: boolean;\n    normalizer?: (text: string) => string;\n    includeHiddenElements?: boolean;\n  },\n): ReactTestInstance;\n")),(0,i.kt)("p",null,"Returns a ",(0,i.kt)("inlineCode",{parentName:"p"},"ReactTestInstance")," for a ",(0,i.kt)("inlineCode",{parentName:"p"},"TextInput")," with a matching display value \u2013 may be a string or regular expression."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx"},"import { render, screen } from '@testing-library/react-native';\n\nrender(<MyComponent />);\nconst element = screen.getByDisplayValue('username');\n")),(0,i.kt)("h3",{id:"by-test-id"},(0,i.kt)("inlineCode",{parentName:"h3"},"ByTestId")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"getByTestId, getAllByTestId, queryByTestId, queryAllByTestId, findByTestId, findAllByTestId")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"getByTestId(\n  testId: TextMatch,\n  options?: {\n    exact?: boolean;\n    normalizer?: (text: string) => string;\n    includeHiddenElements?: boolean;\n  },\n): ReactTestInstance;\n")),(0,i.kt)("p",null,"Returns a ",(0,i.kt)("inlineCode",{parentName:"p"},"ReactTestInstance")," with matching ",(0,i.kt)("inlineCode",{parentName:"p"},"testID")," prop. ",(0,i.kt)("inlineCode",{parentName:"p"},"testID")," \u2013 may be a string or a regular expression."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx"},"import { render, screen } from '@testing-library/react-native';\n\nrender(<MyComponent />);\nconst element = screen.getByTestId('unique-id');\n")),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"In the spirit of ",(0,i.kt)("a",{parentName:"p",href:"https://testing-library.com/docs/guiding-principles"},"the guiding principles"),", it is recommended to use this only after the other queries don't work for your use case. Using ",(0,i.kt)("inlineCode",{parentName:"p"},"testID")," attributes do not resemble how your software is used and should be avoided if possible. However, they are particularly useful for end-to-end testing on real devices, e.g. using Detox and it's an encouraged technique to use there. Learn more from the blog post ",(0,i.kt)("a",{parentName:"p",href:"https://kentcdodds.com/blog/making-your-ui-tests-resilient-to-change"},'"Making your UI tests resilient to change"'),".")),(0,i.kt)("h3",{id:"by-label-text"},(0,i.kt)("inlineCode",{parentName:"h3"},"ByLabelText")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"getByLabelText, getAllByLabelText, queryByLabelText, queryAllByLabelText, findByLabelText, findAllByLabelText")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"getByLabelText(\n  text: TextMatch,\n  options?: {\n    exact?: boolean;\n    normalizer?: (text: string) => string;\n    includeHiddenElements?: boolean;\n  },\n): ReactTestInstance;\n")),(0,i.kt)("p",null,"Returns a ",(0,i.kt)("inlineCode",{parentName:"p"},"ReactTestInstance")," with matching label:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"either by matching ",(0,i.kt)("a",{parentName:"li",href:"https://reactnative.dev/docs/accessibility#aria-label"},(0,i.kt)("inlineCode",{parentName:"a"},"aria-label")),"/",(0,i.kt)("a",{parentName:"li",href:"https://reactnative.dev/docs/accessibility#accessibilitylabel"},(0,i.kt)("inlineCode",{parentName:"a"},"accessibilityLabel"))," prop"),(0,i.kt)("li",{parentName:"ul"},"or by matching text content of view referenced by ",(0,i.kt)("a",{parentName:"li",href:"https://reactnative.dev/docs/accessibility#aria-labelledby-android"},(0,i.kt)("inlineCode",{parentName:"a"},"aria-labelledby")),"/",(0,i.kt)("a",{parentName:"li",href:"https://reactnative.dev/docs/accessibility#accessibilitylabelledby-android"},(0,i.kt)("inlineCode",{parentName:"a"},"accessibilityLabelledBy"))," prop")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx"},"import { render, screen } from '@testing-library/react-native';\n\nrender(<MyComponent />);\nconst element = screen.getByLabelText('my-label');\n")),(0,i.kt)("h3",{id:"by-hint-text"},(0,i.kt)("inlineCode",{parentName:"h3"},"ByHintText"),", ",(0,i.kt)("inlineCode",{parentName:"h3"},"ByA11yHint"),", ",(0,i.kt)("inlineCode",{parentName:"h3"},"ByAccessibilityHint")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"getByA11yHint, getAllByA11yHint, queryByA11yHint, queryAllByA11yHint, findByA11yHint, findAllByA11yHint\ngetByAccessibilityHint, getAllByAccessibilityHint, queryByAccessibilityHint, queryAllByAccessibilityHint, findByAccessibilityHint, findAllByAccessibilityHint\ngetByHintText, getAllByHintText, queryByHintText, queryAllByHintText, findByHintText, findAllByHintText")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"getByHintText(\n  hint: TextMatch,\n  options?: {\n    exact?: boolean;\n    normalizer?: (text: string) => string;\n    includeHiddenElements?: boolean;\n  },\n): ReactTestInstance;\n")),(0,i.kt)("p",null,"Returns a ",(0,i.kt)("inlineCode",{parentName:"p"},"ReactTestInstance")," with matching ",(0,i.kt)("inlineCode",{parentName:"p"},"accessibilityHint")," prop."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx"},"import { render, screen } from '@testing-library/react-native';\n\nrender(<MyComponent />);\nconst element = screen.getByHintText('Plays a song');\n")),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"Please consult ",(0,i.kt)("a",{parentName:"p",href:"https://developer.apple.com/documentation/objectivec/nsobject/1615093-accessibilityhint"},"Apple guidelines on how ",(0,i.kt)("inlineCode",{parentName:"a"},"accessibilityHint")," should be used"),".")),(0,i.kt)("h3",{id:"by-accessibility-state"},(0,i.kt)("inlineCode",{parentName:"h3"},"ByA11yState"),", ",(0,i.kt)("inlineCode",{parentName:"h3"},"ByAccessibilityState")," (deprecated)"),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"This query has been marked deprecated, as is typically too general to give meaningful results. Therefore, it's better to use one of following options:"),(0,i.kt)("ul",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#by-role"},(0,i.kt)("inlineCode",{parentName:"a"},"*ByRole"))," query with relevant state options: ",(0,i.kt)("inlineCode",{parentName:"li"},"disabled"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"selected"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"checked"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"expanded")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"busy")),(0,i.kt)("li",{parentName:"ul"},"use built-in Jest matchers to check the state of element found using some other query:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"enabled state: ",(0,i.kt)("a",{parentName:"li",href:"jest-matchers#tobeenabled"},(0,i.kt)("inlineCode",{parentName:"a"},"toBeEnabled()")," / ",(0,i.kt)("inlineCode",{parentName:"a"},"toBeDisabled()"))),(0,i.kt)("li",{parentName:"ul"},"checked state: ",(0,i.kt)("a",{parentName:"li",href:"jest-matchers#tobechecked"},(0,i.kt)("inlineCode",{parentName:"a"},"toBeChecked()")," / ",(0,i.kt)("inlineCode",{parentName:"a"},"toBePartiallyChecked()"))),(0,i.kt)("li",{parentName:"ul"},"selected state: ",(0,i.kt)("a",{parentName:"li",href:"jest-matchers#tobeselected"},(0,i.kt)("inlineCode",{parentName:"a"},"toBeSelected()"))),(0,i.kt)("li",{parentName:"ul"},"expanded state: ",(0,i.kt)("a",{parentName:"li",href:"jest-matchers#tobeexpanded"},(0,i.kt)("inlineCode",{parentName:"a"},"toBeExpanded()")," / ",(0,i.kt)("inlineCode",{parentName:"a"},"toBeCollapsed()"))),(0,i.kt)("li",{parentName:"ul"},"busy state: ",(0,i.kt)("a",{parentName:"li",href:"jest-matchers#tobebusy"},(0,i.kt)("inlineCode",{parentName:"a"},"toBeBusy()"))))))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"getByA11yState, getAllByA11yState, queryByA11yState, queryAllByA11yState, findByA11yState, findAllByA11yState\ngetByAccessibilityState, getAllByAccessibilityState, queryByAccessibilityState, queryAllByAccessibilityState, findByAccessibilityState, findAllByAccessibilityState")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"getByA11yState(\n  state: {\n    disabled?: boolean,\n    selected?: boolean,\n    checked?: boolean | 'mixed',\n    busy?: boolean,\n    expanded?: boolean,\n  },\n  options?: {\n    includeHiddenElements?: boolean;\n  },\n): ReactTestInstance;\n")),(0,i.kt)("p",null,"Returns a ",(0,i.kt)("inlineCode",{parentName:"p"},"ReactTestInstance")," with matching ",(0,i.kt)("inlineCode",{parentName:"p"},"accessibilityState")," prop or ARIA state props: ",(0,i.kt)("inlineCode",{parentName:"p"},"aria-disabled"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"aria-selected"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"aria-checked"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"aria-busy"),", and ",(0,i.kt)("inlineCode",{parentName:"p"},"aria-expanded"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx"},"import { render, screen } from '@testing-library/react-native';\n\nrender(<Component />);\nconst element = screen.getByA11yState({ disabled: true });\n")),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("h4",{parentName:"admonition",id:"default-state-for-disabled-selected-and-busy-keys"},"Default state for: ",(0,i.kt)("inlineCode",{parentName:"h4"},"disabled"),", ",(0,i.kt)("inlineCode",{parentName:"h4"},"selected"),", and ",(0,i.kt)("inlineCode",{parentName:"h4"},"busy")," keys"),(0,i.kt)("p",{parentName:"admonition"},"Passing ",(0,i.kt)("inlineCode",{parentName:"p"},"false")," matcher value will match both elements with explicit ",(0,i.kt)("inlineCode",{parentName:"p"},"false")," state value and without explicit state value."),(0,i.kt)("p",{parentName:"admonition"},"For instance, ",(0,i.kt)("inlineCode",{parentName:"p"},"getByA11yState({ disabled: false })")," will match elements with following props:"),(0,i.kt)("ul",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"accessibilityState={{ disabled: false, ... }}")),(0,i.kt)("li",{parentName:"ul"},"no ",(0,i.kt)("inlineCode",{parentName:"li"},"disabled")," key under ",(0,i.kt)("inlineCode",{parentName:"li"},"accessibilityState")," prop, e.g. ",(0,i.kt)("inlineCode",{parentName:"li"},"accessibilityState={{}}")),(0,i.kt)("li",{parentName:"ul"},"no ",(0,i.kt)("inlineCode",{parentName:"li"},"accessibilityState")," prop at all")),(0,i.kt)("h4",{parentName:"admonition",id:"default-state-for-checked-and-expanded-keys"},"Default state for: ",(0,i.kt)("inlineCode",{parentName:"h4"},"checked")," and ",(0,i.kt)("inlineCode",{parentName:"h4"},"expanded")," keys"),(0,i.kt)("p",{parentName:"admonition"},"Passing ",(0,i.kt)("inlineCode",{parentName:"p"},"false")," matcher value will only match elements with explicit ",(0,i.kt)("inlineCode",{parentName:"p"},"false")," state value."),(0,i.kt)("p",{parentName:"admonition"},"For instance, ",(0,i.kt)("inlineCode",{parentName:"p"},"getByA11yState({ checked: false })")," will only match elements with:"),(0,i.kt)("ul",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"accessibilityState={{ checked: false, ... }}"))),(0,i.kt)("p",{parentName:"admonition"},"but will not match elements with following props:"),(0,i.kt)("ul",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ul"},"no ",(0,i.kt)("inlineCode",{parentName:"li"},"checked")," key under ",(0,i.kt)("inlineCode",{parentName:"li"},"accessibilityState")," prop, e.g. ",(0,i.kt)("inlineCode",{parentName:"li"},"accessibilityState={{}}")),(0,i.kt)("li",{parentName:"ul"},"no ",(0,i.kt)("inlineCode",{parentName:"li"},"accessibilityState")," prop at all")),(0,i.kt)("p",{parentName:"admonition"},"The difference in handling default values is made to reflect observed accessibility behaviour on iOS and Android platforms.")),(0,i.kt)("h3",{id:"by-accessibility-value"},(0,i.kt)("inlineCode",{parentName:"h3"},"ByA11yValue"),", ",(0,i.kt)("inlineCode",{parentName:"h3"},"ByAccessibilityValue")," (deprecated)"),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"This query has been marked deprecated, as is typically too general to give meaningful results. Therefore, it's better to use one of following options:"),(0,i.kt)("ul",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"jest-matchers#tohaveaccessibilityvalue"},(0,i.kt)("inlineCode",{parentName:"a"},"toHaveAccessibilityValue()"))," Jest matcher to check the state of element found using some other query"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#by-role"},(0,i.kt)("inlineCode",{parentName:"a"},"*ByRole"))," query with ",(0,i.kt)("inlineCode",{parentName:"li"},"value")," option\n:::")),(0,i.kt)("blockquote",{parentName:"admonition"},(0,i.kt)("p",{parentName:"blockquote"},"getByA11yValue, getAllByA11yValue, queryByA11yValue, queryAllByA11yValue, findByA11yValue, findAllByA11yValue\ngetByAccessibilityValue, getAllByAccessibilityValue, queryByAccessibilityValue, queryAllByAccessibilityValue, findByAccessibilityValue, findAllByAccessibilityValue")),(0,i.kt)("pre",{parentName:"admonition"},(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"getByA11yValue(\n  value: {\n    min?: number;\n    max?: number;\n    now?: number;\n    text?: TextMatch;\n  },\n  options?: {\n    includeHiddenElements?: boolean;\n  },\n): ReactTestInstance;\n")),(0,i.kt)("p",{parentName:"admonition"},"Returns a host element with matching accessibility value based on ",(0,i.kt)("inlineCode",{parentName:"p"},"aria-valuemin"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"aria-valuemax"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"aria-valuenow"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"aria-valuetext")," & ",(0,i.kt)("inlineCode",{parentName:"p"},"accessibilityValue")," props. Only value entires provided to the query will be used to match elements. Element might have additional accessibility value entries and still be matched."),(0,i.kt)("p",{parentName:"admonition"},"When querying by ",(0,i.kt)("inlineCode",{parentName:"p"},"text")," entry a string or regex might be used."),(0,i.kt)("pre",{parentName:"admonition"},(0,i.kt)("code",{parentName:"pre",className:"language-jsx"},"import { render, screen } from '@testing-library/react-native';\n\nrender(<View accessibilityValue={{ min: 0, max: 100, now: 25, text: '25%' }} />);\nconst element = screen.getByA11yValue({ now: 25 });\nconst element2 = screen.getByA11yValue({ text: /25/ });\n")),(0,i.kt)("h3",{parentName:"admonition",id:"common-options"},"Common options"),(0,i.kt)("p",{parentName:"admonition"},"Usually query first argument can be a ",(0,i.kt)("strong",{parentName:"p"},"string")," or a ",(0,i.kt)("strong",{parentName:"p"},"regex"),". All queries take at least the ",(0,i.kt)("a",{parentName:"p",href:"#hidden-option"},(0,i.kt)("inlineCode",{parentName:"a"},"hidden"))," option as an optionnal second argument and some queries accept more options which change string matching behaviour. See ",(0,i.kt)("a",{parentName:"p",href:"#textmatch"},"TextMatch")," for more info."),(0,i.kt)("h4",{parentName:"admonition",id:"includehiddenelements-option"},(0,i.kt)("inlineCode",{parentName:"h4"},"includeHiddenElements")," option"),(0,i.kt)("p",{parentName:"admonition"},"All queries have the ",(0,i.kt)("inlineCode",{parentName:"p"},"includeHiddenElements")," option which affects whether ",(0,i.kt)("a",{parentName:"p",href:"/react-native-testing-library/docs/api#ishiddenfromaccessibility"},"elements hidden from accessibility")," are matched by the query. By default queries will not match hidden elements, because the users of the app would not be able to see such elements."),(0,i.kt)("p",{parentName:"admonition"},"You can configure the default value with the ",(0,i.kt)("a",{parentName:"p",href:"/react-native-testing-library/docs/api#configure"},(0,i.kt)("inlineCode",{parentName:"a"},"configure")," function"),"."),(0,i.kt)("p",{parentName:"admonition"},"This option is also available as ",(0,i.kt)("inlineCode",{parentName:"p"},"hidden")," alias for compatibility with ",(0,i.kt)("a",{parentName:"p",href:"https://testing-library.com/docs/queries/byrole#hidden"},"React Testing Library"),"."),(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("strong",{parentName:"p"},"Examples")),(0,i.kt)("pre",{parentName:"admonition"},(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},"render(<Text style={{ display: 'none' }}>Hidden from accessibility</Text>);\n\n// Exclude hidden elements\nexpect(\n  screen.queryByText('Hidden from accessibility', {\n    includeHiddenElements: false,\n  })\n).not.toBeOnTheScreen();\n\n// Include hidden elements\nexpect(screen.getByText('Hidden from accessibility')).toBeOnTheScreen();\nexpect(\n  screen.getByText('Hidden from accessibility', { includeHiddenElements: true })\n).toBeOnTheScreen();\n")),(0,i.kt)("h2",{parentName:"admonition",id:"textmatch-type"},"TextMatch type"),(0,i.kt)("pre",{parentName:"admonition"},(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"type TextMatch = string | RegExp;\n")),(0,i.kt)("p",{parentName:"admonition"},"Most of the query APIs take a ",(0,i.kt)("inlineCode",{parentName:"p"},"TextMatch")," as an argument, which means the argument can be either a ",(0,i.kt)("em",{parentName:"p"},"string")," or ",(0,i.kt)("em",{parentName:"p"},"regex"),"."),(0,i.kt)("h3",{parentName:"admonition",id:"examples"},"Examples"),(0,i.kt)("p",{parentName:"admonition"},"Given the following render:"),(0,i.kt)("pre",{parentName:"admonition"},(0,i.kt)("code",{parentName:"pre",className:"language-jsx"},"render(<Text>Hello World</Text>);\n")),(0,i.kt)("p",{parentName:"admonition"},"Will ",(0,i.kt)("strong",{parentName:"p"},"find a match"),":"),(0,i.kt)("pre",{parentName:"admonition"},(0,i.kt)("code",{parentName:"pre",className:"language-js"},"// Matching a string:\nscreen.getByText('Hello World'); // full string match\nscreen.getByText('llo Worl', { exact: false }); // substring match\nscreen.getByText('hello world', { exact: false }); // ignore case-sensitivity\n\n// Matching a regex:\nscreen.getByText(/World/); // substring match\nscreen.getByText(/world/i); // substring match, ignore case\nscreen.getByText(/^hello world$/i); // full string match, ignore case-sensitivity\nscreen.getByText(/Hello W?oRlD/i); // advanced regex\n")),(0,i.kt)("p",{parentName:"admonition"},"Will ",(0,i.kt)("strong",{parentName:"p"},"NOT find a match")),(0,i.kt)("pre",{parentName:"admonition"},(0,i.kt)("code",{parentName:"pre",className:"language-js"},"// substring does not match\nscreen.getByText('llo Worl');\n// full string does not match\nscreen.getByText('Goodbye World');\n\n// case-sensitive regex with different case\nscreen.getByText(/hello world/);\n")),(0,i.kt)("h3",{parentName:"admonition",id:"text-match-options"},"Options"),(0,i.kt)("h4",{parentName:"admonition",id:"precision"},"Precision"),(0,i.kt)("pre",{parentName:"admonition"},(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"type TextMatchOptions = {\n  exact?: boolean;\n  normalizer?: (text: string) => string;\n};\n")),(0,i.kt)("p",{parentName:"admonition"},"Queries that take a ",(0,i.kt)("inlineCode",{parentName:"p"},"TextMatch")," also accept an object as the second argument that can contain options that affect the precision of string matching:"),(0,i.kt)("ul",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"exact"),": Defaults to ",(0,i.kt)("inlineCode",{parentName:"li"},"true"),"; matches full strings, case-sensitive. When false, matches substrings and is not case-sensitive.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"exact")," has no effect on regex argument."),(0,i.kt)("li",{parentName:"ul"},"In most cases using a ",(0,i.kt)("inlineCode",{parentName:"li"},"regex")," instead of a string gives you more control over fuzzy matching and should be preferred over ",(0,i.kt)("inlineCode",{parentName:"li"},"{ exact: false }"),"."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"normalizer"),": An optional function which overrides normalization behavior. See ",(0,i.kt)("a",{parentName:"li",href:"#normalization"},"Normalization"),".")),(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("inlineCode",{parentName:"p"},"exact")," option defaults to ",(0,i.kt)("inlineCode",{parentName:"p"},"true")," but if you want to search for a text slice or make text matching case-insensitive you can override it. That being said we advise you to use regex in more complex scenarios."),(0,i.kt)("h4",{parentName:"admonition",id:"normalization"},"Normalization"),(0,i.kt)("p",{parentName:"admonition"},"Before running any matching logic against text, it is automatically normalized. By default, normalization consists of trimming whitespace from the start and end of text, and collapsing multiple adjacent whitespace characters into a single space."),(0,i.kt)("p",{parentName:"admonition"},"If you want to prevent that normalization, or provide alternative normalization (e.g. to remove Unicode control characters), you can provide a ",(0,i.kt)("inlineCode",{parentName:"p"},"normalizer")," function in the options object. This function will be given a string and is expected to return a normalized version of that string.")),(0,i.kt)("p",null,"Specifying a value for ",(0,i.kt)("inlineCode",{parentName:"p"},"normalizer")," replaces the built-in normalization, but you can call ",(0,i.kt)("inlineCode",{parentName:"p"},"getDefaultNormalizer")," to obtain a built-in normalizer, either to adjust that normalization or to call it from your own normalizer.\n:::"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"getDefaultNormalizer")," take options object which allows the selection of behaviour:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"trim"),": Defaults to ",(0,i.kt)("inlineCode",{parentName:"li"},"true"),". Trims leading and trailing whitespace."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"collapseWhitespace"),": Defaults to ",(0,i.kt)("inlineCode",{parentName:"li"},"true"),". Collapses inner whitespace (newlines, tabs repeated spaces) into a single space.")),(0,i.kt)("h5",{id:"normalization-examples"},"Normalization Examples"),(0,i.kt)("p",null,"To perform a match against text without trimming:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"screen.getByText(node, 'text', {\n  normalizer: getDefaultNormalizer({ trim: false }),\n});\n")),(0,i.kt)("p",null,"To override normalization to remove some Unicode characters whilst keeping some (but not all) of the built-in normalization behavior:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"screen.getByText(node, 'text', {\n  normalizer: (str) => getDefaultNormalizer({ trim: false })(str).replace(/[\\u200E-\\u200F]*/g, ''),\n});\n")),(0,i.kt)("h2",{id:"legacy-unit-testing-helpers"},"Legacy unit testing helpers"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Use sparingly and responsibly, escape hatches here")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"render")," from ",(0,i.kt)("inlineCode",{parentName:"p"},"@testing-library/react-native")," exposes additional queries that ",(0,i.kt)("strong",{parentName:"p"},"should not be used in component integration testing"),", but some users (like component library creators) interested in unit testing some components may find helpful."),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Queries helpful in unit testing"),(0,i.kt)("p",null,"The interface is the same as for other queries, but we won't provide full names so that they're harder to find by search engines."),(0,i.kt)("h3",{id:"unsafe_bytype"},(0,i.kt)("inlineCode",{parentName:"h3"},"UNSAFE_ByType")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"UNSAFE_getByType, UNSAFE_getAllByType, UNSAFE_queryByType, UNSAFE_queryAllByType")),(0,i.kt)("p",null,"Returns a ",(0,i.kt)("inlineCode",{parentName:"p"},"ReactTestInstance")," with matching a React component type."),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"This query has been marked unsafe, since it requires knowledge about implementation details of the component. Use responsibly.")),(0,i.kt)("h3",{id:"unsafe_byprops"},(0,i.kt)("inlineCode",{parentName:"h3"},"UNSAFE_ByProps")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"UNSAFE_getByProps, UNSAFE_getAllByProps, UNSAFE_queryByProps, UNSAFE_queryAllByProps")),(0,i.kt)("p",null,"Returns a ",(0,i.kt)("inlineCode",{parentName:"p"},"ReactTestInstance")," with matching props object."),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"This query has been marked unsafe, since it requires knowledge about implementation details of the component. Use responsibly."))))}u.isMDXComponent=!0}}]);